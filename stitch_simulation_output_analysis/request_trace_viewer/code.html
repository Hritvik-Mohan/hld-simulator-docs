<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>DSDS - Request Trace Viewer</title>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<!-- Material Symbols -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<!-- Tailwind Config -->
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                        "surface-dark": "#1a2632",
                        "surface-dark-highlight": "#243242",
                        "border-dark": "#2a3b4d",
                        "semantic-wait": "#d97706", /* Amber-600 */
                        "semantic-network": "#9333ea", /* Purple-600 */
                        "semantic-error": "#dc2626", /* Red-600 */
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"],
                        "mono": ["ui-monospace", "SFMono-Regular", "Menlo", "Monaco", "Consolas", "Liberation Mono", "Courier New", "monospace"]
                    },
                    borderRadius: {"DEFAULT": "0.125rem", "lg": "0.25rem", "xl": "0.5rem", "full": "0.75rem"},
                },
            },
        }
    </script>
<style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom Scrollbar for dense UI */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #101922; 
        }
        ::-webkit-scrollbar-thumb {
            background: #2a3b4d; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3b4f63; 
        }
        
        .timeline-grid {
            background-image: linear-gradient(to right, #2a3b4d 1px, transparent 1px);
            background-size: 10% 100%; /* Simulate grid lines every 10% */
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white h-screen flex flex-col overflow-hidden">
<!-- Top Navigation -->
<header class="flex-none flex items-center justify-between whitespace-nowrap border-b border-solid border-border-dark bg-background-dark px-6 py-2.5 z-20">
<div class="flex items-center gap-4 text-white">
<div class="size-6 text-primary">
<svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
</svg>
</div>
<h2 class="text-white text-base font-bold leading-tight tracking-tight">DSDS - Trace Viewer</h2>
<div class="h-6 w-px bg-border-dark mx-2"></div>
<!-- Breadcrumbs Integrated -->
<nav class="flex items-center gap-2 text-sm">
<a class="text-slate-400 hover:text-white transition-colors font-medium" href="#">Simulations</a>
<span class="material-symbols-outlined text-slate-600 text-[16px]">chevron_right</span>
<a class="text-slate-400 hover:text-white transition-colors font-medium" href="#">Sim-2023-Alpha</a>
<span class="material-symbols-outlined text-slate-600 text-[16px]">chevron_right</span>
<span class="text-primary font-medium flex items-center gap-1">
<span class="material-symbols-outlined text-[16px]">bug_report</span>
                    Trace req-8821a
                </span>
</nav>
</div>
<div class="flex items-center gap-4">
<button class="flex items-center justify-center rounded h-8 px-3 bg-surface-dark hover:bg-surface-dark-highlight border border-border-dark text-white text-xs font-bold transition-colors">
<span class="material-symbols-outlined text-[16px] mr-2">download</span>
                Export JSON
            </button>
<div class="bg-center bg-no-repeat bg-cover rounded-full size-8 border border-border-dark" data-alt="User profile avatar showing a generic silhouette" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAIYHt_LLOCUMwTwVsoPxqjlTcPMnqiQlt5HqONpdmWnHhwDkOs9l5CeRVilgwzZ842kPTK_qYa_HR6XTAE81YLHmRRTCUtR3Y8SuaJjvW2ivmn6Sza5_8fg8iwBDgj7NE9OmqPHrCUVxtUccntljQopYwTbOm53xW1ulwTb-lYxucjJTe3_NymHQlG5ekPRdP7yGvUmWqz3H3werD1TpbnoYjiEew_fbhMjQ_MGdh72VYOJieWiZS9Hq5_TZkdX6iGJtEtme_183U");'></div>
</div>
</header>
<!-- Main Workspace -->
<div class="flex-1 flex flex-col min-h-0 overflow-hidden">
<!-- Toolbar & Stats Strip -->
<div class="flex-none bg-background-dark border-b border-border-dark p-4 pb-2 space-y-4">
<!-- KPI Stats -->
<div class="grid grid-cols-4 gap-4">
<div class="flex flex-col gap-1 rounded bg-surface-dark p-3 border border-border-dark relative overflow-hidden group">
<div class="absolute right-0 top-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
<span class="material-symbols-outlined text-4xl text-white">timer</span>
</div>
<p class="text-slate-400 text-xs font-medium uppercase tracking-wider">Total Latency</p>
<div class="flex items-baseline gap-2">
<p class="text-white text-xl font-bold font-mono">345ms</p>
<span class="text-xs text-red-400 font-mono">+12% vs p50</span>
</div>
</div>
<div class="flex flex-col gap-1 rounded bg-surface-dark p-3 border border-border-dark">
<p class="text-slate-400 text-xs font-medium uppercase tracking-wider">Total Hops</p>
<p class="text-white text-xl font-bold font-mono">8</p>
</div>
<div class="flex flex-col gap-1 rounded bg-surface-dark p-3 border border-border-dark">
<p class="text-slate-400 text-xs font-medium uppercase tracking-wider">Bottleneck</p>
<div class="flex items-center gap-2">
<span class="size-2 rounded-full bg-semantic-error"></span>
<p class="text-white text-lg font-bold truncate">PaymentService</p>
</div>
</div>
<div class="flex flex-col gap-1 rounded bg-surface-dark p-3 border border-border-dark">
<p class="text-slate-400 text-xs font-medium uppercase tracking-wider">Error Rate</p>
<p class="text-white text-xl font-bold font-mono">0.02%</p>
</div>
</div>
<!-- Toolbar Controls -->
<div class="flex justify-between items-center pt-2">
<div class="flex items-center gap-2">
<!-- Zoom Controls -->
<div class="flex rounded bg-surface-dark border border-border-dark">
<button class="p-1.5 text-slate-400 hover:text-white border-r border-border-dark">
<span class="material-symbols-outlined text-[20px]">zoom_in</span>
</button>
<button class="p-1.5 text-slate-400 hover:text-white">
<span class="material-symbols-outlined text-[20px]">zoom_out</span>
</button>
</div>
<div class="h-6 w-px bg-border-dark mx-1"></div>
<!-- Filter Toggles -->
<button class="flex items-center gap-2 px-3 py-1.5 rounded bg-surface-dark border border-border-dark text-slate-300 hover:text-white text-xs font-medium">
<span class="size-2 rounded-full bg-semantic-network"></span>
                        Network
                    </button>
<button class="flex items-center gap-2 px-3 py-1.5 rounded bg-surface-dark border border-border-dark text-slate-300 hover:text-white text-xs font-medium">
<span class="size-2 rounded-full bg-semantic-wait"></span>
                        Wait
                    </button>
<button class="flex items-center gap-2 px-3 py-1.5 rounded bg-surface-dark border border-border-dark text-slate-300 hover:text-white text-xs font-medium">
<span class="size-2 rounded-full bg-primary"></span>
                        Service
                    </button>
</div>
<div class="flex items-center gap-3">
<!-- Segmented Control -->
<div class="flex h-8 items-center rounded bg-surface-dark border border-border-dark p-0.5">
<label class="cursor-pointer h-full px-3 flex items-center justify-center rounded text-xs font-medium text-slate-400 hover:text-slate-200 has-[:checked]:bg-background-dark has-[:checked]:text-white has-[:checked]:shadow-sm transition-all">
<span>p50 Trace</span>
<input class="hidden" name="trace_type" type="radio" value="p50"/>
</label>
<label class="cursor-pointer h-full px-3 flex items-center justify-center rounded text-xs font-medium text-slate-400 hover:text-slate-200 has-[:checked]:bg-background-dark has-[:checked]:text-white has-[:checked]:shadow-sm transition-all">
<span>p99 Trace</span>
<input checked="" class="hidden" name="trace_type" type="radio" value="p99"/>
</label>
</div>
<button class="flex items-center justify-center rounded h-8 px-3 bg-primary hover:bg-blue-600 text-white gap-2 text-xs font-bold transition-colors shadow-lg shadow-primary/20">
<span class="material-symbols-outlined text-[18px]">difference</span>
                        Compare Trace
                    </button>
</div>
</div>
</div>
<!-- Trace Timeline Container -->
<div class="flex-1 flex overflow-hidden relative">
<!-- Sidebar / Tree List -->
<div class="w-64 flex-none flex flex-col border-r border-border-dark bg-background-dark z-10">
<div class="h-8 flex items-center px-4 bg-surface-dark border-b border-border-dark text-xs font-bold text-slate-400 uppercase tracking-wider">
                    Service Name
                </div>
<div class="flex-1 overflow-y-auto">
<!-- Row 1 -->
<div class="h-9 flex items-center px-4 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-white group">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">expand_more</span>
<span class="material-symbols-outlined text-green-500 mr-2 text-[16px]">language</span>
                        API Gateway
                    </div>
<!-- Row 2 -->
<div class="h-9 flex items-center px-4 pl-8 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-white">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">subdirectory_arrow_right</span>
                        Auth Service
                    </div>
<!-- Row 3 -->
<div class="h-9 flex items-center px-4 pl-8 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-white bg-surface-dark/50 border-l-2 border-l-primary">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">subdirectory_arrow_right</span>
                        Payment Service
                    </div>
<!-- Row 4 -->
<div class="h-9 flex items-center px-4 pl-12 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-slate-400">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">subdirectory_arrow_right</span>
                        Main DB (Replica)
                    </div>
<!-- Row 5 -->
<div class="h-9 flex items-center px-4 pl-12 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-slate-400">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">subdirectory_arrow_right</span>
                        Redis Cache
                    </div>
<!-- Row 6 -->
<div class="h-9 flex items-center px-4 pl-8 border-b border-border-dark/50 hover:bg-surface-dark cursor-pointer text-xs font-medium text-white">
<span class="material-symbols-outlined text-slate-500 mr-2 text-[16px]">subdirectory_arrow_right</span>
                        Notification Svc
                    </div>
</div>
</div>
<!-- Gantt Chart Area -->
<div class="flex-1 flex flex-col bg-background-dark relative overflow-hidden">
<!-- Timeline Header (Ruler) -->
<div class="h-8 flex-none bg-surface-dark border-b border-border-dark relative overflow-hidden">
<div class="absolute inset-0 flex text-[10px] text-slate-500 font-mono items-end pb-1 select-none">
<div class="flex-1 border-l border-border-dark pl-1">0ms</div>
<div class="flex-1 border-l border-border-dark pl-1">50ms</div>
<div class="flex-1 border-l border-border-dark pl-1">100ms</div>
<div class="flex-1 border-l border-border-dark pl-1">150ms</div>
<div class="flex-1 border-l border-border-dark pl-1">200ms</div>
<div class="flex-1 border-l border-border-dark pl-1">250ms</div>
<div class="flex-1 border-l border-border-dark pl-1">300ms</div>
<div class="flex-1 border-l border-border-dark pl-1">350ms</div>
<div class="flex-1 border-l border-border-dark pl-1">400ms</div>
<div class="flex-1 border-l border-border-dark pl-1">450ms</div>
</div>
</div>
<!-- Timeline Rows -->
<div class="flex-1 overflow-auto timeline-grid relative">
<!-- Current Time Indicator Line -->
<div class="absolute top-0 bottom-0 w-px bg-red-500/50 z-20 left-[68%] pointer-events-none">
<div class="absolute top-0 -translate-x-1/2 bg-red-500 text-[10px] text-white px-1 rounded-b">345ms</div>
</div>
<!-- Row 1: API Gateway -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 hover:bg-white/5 transition-colors group">
<!-- Bar Container -->
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex" style="left: 0%; width: 5%;">
<div class="h-full bg-semantic-network w-[30%]" title="Network: 5ms"></div>
<div class="h-full bg-semantic-wait w-[10%]" title="Wait: 2ms"></div>
<div class="h-full bg-primary w-[60%]" title="Service: 15ms"></div>
</div>
<span class="ml-[6%] text-[10px] text-slate-500 opacity-0 group-hover:opacity-100 font-mono">22ms</span>
</div>
<!-- Row 2: Auth Service -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 hover:bg-white/5 transition-colors group">
<!-- Connecting line visual -->
<div class="absolute top-[-18px] left-[2.5%] w-px h-[28px] border-l border-dashed border-slate-600 z-0"></div>
<div class="absolute top-2.5 left-[2.5%] w-[4%] h-px border-t border-dashed border-slate-600 z-0"></div>
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex shadow-sm z-10" style="left: 6%; width: 14%;">
<div class="h-full bg-semantic-network w-[15%]" title="Network: 10ms"></div>
<div class="h-full bg-semantic-wait w-[70%]" title="Wait: 50ms"></div>
<div class="h-full bg-primary w-[15%]" title="Service: 5ms"></div>
</div>
<span class="ml-[21%] text-[10px] text-slate-500 opacity-0 group-hover:opacity-100 font-mono">65ms</span>
</div>
<!-- Row 3: Payment Service (Bottleneck) -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 bg-primary/5 hover:bg-white/5 transition-colors group">
<!-- Connecting line visual -->
<div class="absolute top-[-18px] left-[13%] w-px h-[28px] border-l border-dashed border-slate-600 z-0"></div>
<div class="absolute top-2.5 left-[13%] w-[7%] h-px border-t border-dashed border-slate-600 z-0"></div>
<!-- Comparison Ghost Trace (Previous Run) -->
<div class="absolute h-6 top-1.5 rounded-sm border border-slate-600/30 border-dashed z-0" style="left: 20%; width: 15%;"></div>
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex shadow-sm ring-1 ring-white/20 z-10" style="left: 20%; width: 25%;">
<div class="h-full bg-semantic-network w-[5%]" title="Network: 2ms"></div>
<div class="h-full bg-semantic-wait w-[10%]" title="Wait: 12ms"></div>
<div class="h-full bg-semantic-error w-[85%] flex items-center justify-center" title="Service: 120ms">
<span class="material-symbols-outlined text-[12px] text-white">warning</span>
</div>
</div>
<span class="ml-[46%] text-[10px] text-slate-500 opacity-0 group-hover:opacity-100 font-mono">134ms</span>
</div>
<!-- Row 4: Main DB -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 hover:bg-white/5 transition-colors group">
<div class="absolute top-[-18px] left-[32%] w-px h-[28px] border-l border-dashed border-slate-600 z-0"></div>
<div class="absolute top-2.5 left-[32%] w-[2%] h-px border-t border-dashed border-slate-600 z-0"></div>
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex z-10" style="left: 34%; width: 10%;">
<div class="h-full bg-semantic-network w-[5%]"></div>
<div class="h-full bg-primary w-[95%]"></div>
</div>
</div>
<!-- Row 5: Redis -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 hover:bg-white/5 transition-colors group">
<!-- Parallel call visual from Payment Service -->
<div class="absolute top-[-54px] left-[32%] w-px h-[64px] border-l border-dashed border-slate-600 z-0"></div>
<div class="absolute top-2.5 left-[32%] w-[8%] h-px border-t border-dashed border-slate-600 z-0"></div>
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex z-10" style="left: 40%; width: 2%;">
<div class="h-full bg-primary w-[100%]"></div>
</div>
</div>
<!-- Row 6: Notification Svc (Async) -->
<div class="h-9 flex items-center relative border-b border-border-dark/20 hover:bg-white/5 transition-colors group">
<div class="absolute top-[-165px] left-[2.5%] w-px h-[175px] border-l border-dashed border-slate-600 z-0 opacity-30"></div>
<div class="absolute top-2.5 left-[2.5%] w-[60%] h-px border-t border-dashed border-slate-600 z-0 opacity-30"></div>
<div class="absolute h-4 top-2.5 rounded-sm overflow-hidden flex z-10 opacity-70" style="left: 65%; width: 10%;">
<div class="h-full bg-semantic-wait w-[30%]"></div>
<div class="h-full bg-primary w-[70%]"></div>
</div>
</div>
</div>
</div>
</div>
<!-- Details Panel (Bottom Section) -->
<div class="h-64 flex-none bg-surface-dark border-t border-border-dark flex flex-col z-30 shadow-[0_-4px_16px_rgba(0,0,0,0.3)]">
<div class="flex items-center justify-between px-4 h-10 border-b border-border-dark bg-surface-dark-highlight">
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-semantic-error">error</span>
<h3 class="text-sm font-bold text-white">Span Details: PaymentService</h3>
<span class="text-xs text-slate-400 font-mono bg-background-dark px-1.5 py-0.5 rounded border border-border-dark">span-id: 99a2-b41</span>
</div>
<div class="flex items-center gap-2">
<button class="text-slate-400 hover:text-white"><span class="material-symbols-outlined">open_in_full</span></button>
<button class="text-slate-400 hover:text-white"><span class="material-symbols-outlined">close</span></button>
</div>
</div>
<div class="flex-1 flex overflow-hidden">
<!-- Details Tags -->
<div class="w-1/3 border-r border-border-dark p-4 overflow-y-auto">
<h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Timing Breakdown</h4>
<div class="space-y-3">
<div>
<div class="flex justify-between text-xs mb-1">
<span class="text-slate-300">Total Duration</span>
<span class="text-white font-mono">134ms</span>
</div>
<div class="w-full bg-background-dark rounded-full h-1.5">
<div class="bg-semantic-error h-1.5 rounded-full" style="width: 100%"></div>
</div>
</div>
<div class="grid grid-cols-3 gap-2">
<div class="p-2 bg-background-dark rounded border border-border-dark">
<p class="text-[10px] text-slate-500 uppercase">Wait</p>
<p class="text-semantic-wait font-mono font-bold text-sm">12ms</p>
</div>
<div class="p-2 bg-background-dark rounded border border-border-dark">
<p class="text-[10px] text-slate-500 uppercase">Network</p>
<p class="text-semantic-network font-mono font-bold text-sm">2ms</p>
</div>
<div class="p-2 bg-background-dark rounded border border-border-dark">
<p class="text-[10px] text-slate-500 uppercase">Processing</p>
<p class="text-semantic-error font-mono font-bold text-sm">120ms</p>
</div>
</div>
</div>
<h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mt-4 mb-2">Metadata</h4>
<div class="text-xs space-y-1">
<div class="flex justify-between border-b border-border-dark/50 py-1">
<span class="text-slate-400">Node</span>
<span class="text-slate-200">us-east-1a-payments-04</span>
</div>
<div class="flex justify-between border-b border-border-dark/50 py-1">
<span class="text-slate-400">Method</span>
<span class="text-primary font-mono">POST /process</span>
</div>
<div class="flex justify-between border-b border-border-dark/50 py-1">
<span class="text-slate-400">Status</span>
<span class="text-semantic-error font-bold">503 Service Unavailable</span>
</div>
</div>
</div>
<!-- Logs / Stack Trace -->
<div class="w-2/3 p-0 flex flex-col bg-background-dark">
<div class="flex items-center gap-4 px-4 h-8 border-b border-border-dark bg-surface-dark">
<button class="text-xs font-medium text-primary border-b-2 border-primary h-full px-1">Logs</button>
<button class="text-xs font-medium text-slate-400 hover:text-white h-full px-1">Events</button>
<button class="text-xs font-medium text-slate-400 hover:text-white h-full px-1">Dependencies</button>
</div>
<div class="flex-1 overflow-y-auto p-4 font-mono text-xs text-slate-300">
<div class="flex gap-2 mb-1">
<span class="text-slate-500">14:02:22.401</span>
<span class="text-blue-400">INFO</span>
<span>Received payment request for amount $45.00</span>
</div>
<div class="flex gap-2 mb-1">
<span class="text-slate-500">14:02:22.405</span>
<span class="text-blue-400">INFO</span>
<span>Validating merchant ID merchant_882</span>
</div>
<div class="flex gap-2 mb-1">
<span class="text-slate-500">14:02:22.418</span>
<span class="text-yellow-400">WARN</span>
<span>Database connection pool saturation &gt; 85%</span>
</div>
<div class="flex gap-2 mb-1 bg-red-900/20 -mx-4 px-4 py-1">
<span class="text-slate-500">14:02:22.530</span>
<span class="text-red-400">ERROR</span>
<span>TimeoutException: Upstream dependency 'FraudCheck' did not respond in 100ms</span>
</div>
<div class="pl-24 text-slate-500">
                            at com.dsds.payment.Service.execute(Service.java:42)<br/>
                            at com.dsds.core.Runner.lambda$0(Runner.java:108)
                        </div>
</div>
</div>
</div>
</div>
</div>
</body></html>